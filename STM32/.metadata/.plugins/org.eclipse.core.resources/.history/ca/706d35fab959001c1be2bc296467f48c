# include "generator.h"

int T_bas = 250;
int T_haut = 500;

int sig_state = 0;
int time_last_switch = 0;



void gen_callback(){

	if (sig_state == 0){  // on est a l'etat bas
		int time = HAL_GetTick();
		if (time - time_last_switch > T_bas){
			HAL_GPIO_WritePin(GPIOB, LD3_Pin, 1);
			HAL_GPIO_WritePin(GPIOC, GPIO_PIN_8, 1);
			time_last_switch = time;
			sig_state = 1;
		}
	}

	if (sig_state == 1){  // on est a l'etat haut
		int time = HAL_GetTick();
		if (time - time_last_switch > T_haut){
			HAL_GPIO_WritePin(GPIOB, LD3_Pin, 0);
			HAL_GPIO_WritePin(GPIOC, GPIO_PIN_8, 0);

			time_last_switch = time;
			sig_state = 0;

		}
	}






}


















